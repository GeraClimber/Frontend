<div class="component-wrap">
    <div class="login-register-wrapper">
        <mat-card class="login-register-card">
            <div class="login-register-content">
                <div class="login-register-header">
                    <h2>Register</h2>
                </div>
                <form [formGroup]="registerForm" (ngSubmit)="register()" >
                    @for(error of errors; track error){
                        <div class="bg-red-100 border mb-2 flex flex-col gap-2 border-red-400 text-red-400 px4 py4 rounded-md relative">
                          <span class="text-warning">{{error.description}}</span>
                          
                        </div>
                    }

                    <mat-form-field appearance="fill" class="login-register-form-field">
                        <mat-label>Email</mat-label>
                        <input matInput placeholder="Email" appLoginAutoFocus  formControlName="email"  />
                        <mat-icon matPrefix>email</mat-icon>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="login-register-form-field">
                        <mat-label>Full Name</mat-label>
                        <input matInput placeholder="Full Name" formControlName="fullName">
                        <mat-icon matPrefix>person</mat-icon>
                    </mat-form-field>

                    <!-- <mat-form-field appearance="fill" class="login-register-form-field">
                        <mat-label>Roles</mat-label>
                        <mat-select formControlName="roles" multiple>
                          @for (item of roles$ | async; track item) {
                          <mat-option [value]="item.name">{{item.name}}</mat-option>
                          }
                  
                        </mat-select>
                        <mat-icon matPrefix>groups</mat-icon>
                    </mat-form-field> -->

                    <mat-form-field appearance="fill" class="login-register-form-field">
                        <mat-label> Password</mat-label>
                        <input matInput formControlName="password" type="{{passwordHide ? 'password':'text'}}" placeholder="Password">
                        <mat-icon matPrefix>lock</mat-icon>
                        <mat-icon (click)="passwordHide = !passwordHide" matSuffix>{{passwordHide ?
                          'visibility_off':'visibility'}}</mat-icon>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="login-register-form-field">
                        <mat-label>Confirm Password</mat-label>
                        <input formControlName="confirmPassword" matInput type="{{confirmPasswordHide ? 'password':'text'}}"
                          placeholder="Confirm Password">
                        <mat-icon matPrefix>lock</mat-icon>
                        <mat-icon (click)="confirmPasswordHide = !confirmPasswordHide" matSuffix>{{confirmPasswordHide ?
                          'visibility_off':'visibility'}}</mat-icon>
                    </mat-form-field>

                    <span class="text-warning"
                        *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.dirty && registerForm.get('confirmPassword')?.touched">
                        Passwords do not match.
                    </span>
        
                    <button  [disabled]="!registerForm.valid" class="login-register-button" mat-raised-button color="primary" type="submit" >
                        Register
                    </button>
                    <div class="login-register-link-wrap">
                        <span>
                            Already have an account?
                        </span>
                        <a class="login-register-link" [routerLink]="['/login']">Login</a>
                    </div>

                </form>
            </div>
        </mat-card>
    </div>
</div>
